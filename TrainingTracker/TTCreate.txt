CREATE TABLE TT_EVENT  (
      TRAINING_ID  				NUMBER(10)
   ,  TRAINING_NAME  			VARCHAR(70)
   ,  DISCRIPTION 				VARCHAR(3000)
   ,  TOWARDS_PLA_FAMILY  		VARCHAR(30)
   ,  TOWARDS_PLA_AREAS 		VARCHAR(30)
   ,  NUMBER_OF_SESSIONS		NUMBER (2)
   ,  PRESENTOR_ID1 			VARCHAR (50)
   ,  PRESENTOR_ID2 			VARCHAR (50)
   ,  PRESENTOR_ID3 			VARCHAR (50)
   ,  PRESENTOR_ID4 			VARCHAR (50)
   ,  PRESENTOR_ID5 			VARCHAR (50)   
   ,  							VARCHAR(10)       
   ,  OWNED_BY					VARCHAR(50)
   ,  CONSTRAINT TE_training_id_pk  PRIMARY KEY (TRAINING_ID)
);


INSERT INTO TT_EVENT  VALUES ('12345','Networking DSI OS Layer Training','This (Networking) session is one 
                                     day class of DSI OS Layer 5 days session, it will be delivered in 2 hours per day for  a week,  considered all shift engineers.' , 'DB-SYSTEMS','RAC-ADMIN' ,2,'rajendra.ghatge@oracle.com','','','','','SHRIKANT.GAVALI@ORACLE.COM','Closed')


CREATE TABLE TTEVENT_SESSIONS  (
       TRAINING_ID  		NUMBER(15)
   ,   SESSION_ID			NUMBER(2)
   ,   LOCATION 			VARCHAR(50)
   ,   FROM_DATETIMEL		TIMESTAMP(2) WITH LOCAL TIME ZONE;
   ,   FROM_DATETIMEG		TIMESTAMP(2) WITH TIME ZONE;
   ,   NUMBER_OF_DAYS 		INTERVAL DAY(2) TO SECOND(0)
   ,   INTERVAL				INTERVAL DAY(1) TO SECOND(0)
   ,   STATUS 				VARCHAR(20)
   ,   CONSTRAINT TTE_sessions_pk  PRIMARY KEY (TRAINING_ID,SESSION_ID)
   ,   CONSTRAINT ttes_id_fk  FOREIGN KEY  (TRAINING_ID) references TT_EVENT(TRAINING_ID) ON DELETE CASCADE
);

CREATE TABLE TTESESSIONS_ATTENDEE (
	   TRAINING_ID  			NUMBER(10)
   ,   SESSION_ID				NUMBER(2)
   ,   ATTENDEE_ID				VARCHAR(50)
   ,   NOMINATED_BY 			VARCHAR(50)
   ,   CONSTRAINT TES_attendee_pk  PRIMARY KEY (TRAINING_ID,SESSION_ID,ATTENDEE_ID)
);

   ALTER TABLE  TTESESSIONS_ATTENDEE ADD  CONSTRAINT ttesa_tid_fk  FOREIGN KEY  (TRAINING_ID) references TT_EVENT(TRAINING_ID) ON DELETE CASCADE
   ALTER TABLE  TTESESSIONS_ATTENDEE ADD  CONSTRAINT ttesa_sid_fk  FOREIGN KEY  (SESSION_ID) references TTEVENT_SESSIONS(SESSION_ID)
   ALTER TABLE  TTESESSIONS_ATTENDEE ADD  CONSTRAINT ttesa_aid_fk  FOREIGN KEY  (ATTENDEE_ID) references TT_EMPLOYEE(EMP_ID)

CREATE TABLE  TT_EMPLOYEE (
	   EMP_ID  			VARCHAR(50)
   ,   DESIGNATION		VARCHAR(15)
   ,   MANAGER_ID		VARCHAR(50)
   ,   CONSTRAINT emp_pk  PRIMARY KEY (EMP_ID)
   ,   CONSTRAINT mgr_fk  FOREIGN KEY  (MANAGER_ID) references  TT_EMPLOYEE(EMP_ID) ON DELETE CASCADE
);


CREATE TABLE TTE_MANAGER_PROFILE(
	    MANAGER_ID  VARCHAR(50)
	,	ORG_ID		VARCHAR(30)   UNIQUE
	, 	LOCATION	VARCHAR(30)	  
	, 	FN_MGR_ID	VARCHAR(30)
	,   PLA_FAMILY  VARCHAR(30)   
	, 	PLA_AREA	VARCHAR(30)
	,   CONSTRAINT mgrp_pk  PRIMARY KEY (MANAGER_ID)
	,   CONSTRAINT mgrp_fk  FOREIGN KEY  (MANAGER_ID) references TT_EMPLOYEE(EMP_ID) ON DELETE CASCADE
	,   CONSTRAINT fn_mgr_fk  FOREIGN KEY  (FN_MGR_ID) references TT_EMPLOYEE(EMP_ID) ON DELETE CASCADE
);




CREATE TABLE TTE_MANAGER_PROFILE(
	    MANAGER_ID  VARCHAR(50)
	,	ORG_ID		VARCHAR(30)   UNIQUE
	, 	LOCATION	VARCHAR(30)	  
	, 	FN_MGR_ID	VARCHAR(30)
	,	SUBSCRIPTION_ID NUMBER(2)	UNIQUE
	,   CONSTRAINT mgrp_pk  PRIMARY KEY (MANAGER_ID)
	,   CONSTRAINT mgrp_fk  FOREIGN KEY  (MANAGER_ID) references TT_EMPLOYEE(EMP_ID) ON DELETE CASCADE
	,   CONSTRAINT fn_mgr_fk  FOREIGN KEY  (FN_MGR_ID) references TT_EMPLOYEE(EMP_ID) ON DELETE CASCADE
);



CREATE TABLE SUBSCRIPTION(
		SUBSCRIPTION_ID NUMBER(2)
	,   PLA_FAMILY  VARCHAR(30)   
	, 	PLA_AREA	VARCHAR(30)
)

CREATE TABLE SUBSCRIPTION(
		PLA_LEAD    VARCHAR(50)
	,   PLA_FAMILY  VARCHAR(30)   
	, 	PLA_AREA	VARCHAR(30)
)


-----------------------------------------------------------------------------------------------------------------------------------------------



INSERT INTO  TTE_MANAGER_PROFILE VALUES ('RAJNISH.PRIYADARSHI@ORACLE.COM','RPRIYADA_ORG_WW@ORACLE.COM','BANGALORE','','DB Systems','');
INSERT INTO  TTE_MANAGER_PROFILE VALUES ('BHAKTI.DASH@ORACLE.COM','','BANGALORE','','DB Systems','DB Data Warehouse');
INSERT INTO  TTE_MANAGER_PROFILE VALUES ('SHRIKANT.GAVALI@ORACLE.COM','SGAVALI_ORG_WW@ORACLE.COM','BANGALORE','','DB Systems','Scalability' );
INSERT INTO  TTE_MANAGER_PROFILE VALUES ('VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM','VIJBALAK_ORG_WW@ORACLE.COM','BANGALORE','','DB Systems','Scalability' );
INSERT INTO  TTE_MANAGER_PROFILE VALUES ('SHIJU.MAMMEN@ORACLE.COM','SMAMMEN_ORG_WW@ORACLE.COM', 'BANGALORE', '' ,'DB Systems','Scalability');


INSERT INTO  TT_EMPLOYEE VALUES ('RAJNISH.PRIYADARSHI@ORACLE.COM','M4','' );
INSERT INTO  TT_EMPLOYEE VALUES ('BHAKTI.DASH@ORACLE.COM','M3','RAJNISH.PRIYADARSHI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('SHRIKANT.GAVALI@ORACLE.COM','M3','RAJNISH.PRIYADARSHI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM','M3','RAJNISH.PRIYADARSHI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('SHIJU.MAMMEN@ORACLE.COM','M3','RAJNISH.PRIYADARSHI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('SRINIVAS.DUSA@ORACLE.COM','IC4','RAJNISH.PRIYADARSHI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('SYAM.KICHU@ORACLE.COM','IC4','RAJNISH.PRIYADARSHI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('KOUSHAL.MEHTA@ORACLE.COM','IC5','RAJNISH.PRIYADARSHI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('JYOTI.PRAKASH.VERMA@ORACLE.COM','IC4','RAJNISH.PRIYADARSHI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('SRINIVASA.NANDURI@ORACLE.COM','IC3','RAJNISH.PRIYADARSHI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('SHILPA.RANI@ORACLE.COM','IC3','RAJNISH.PRIYADARSHI@ORACLE.COM' );


INSERT INTO  TT_EMPLOYEE VALUES ('KAUSHAL.ANAND@ORACLE.COM','IC3','VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('SANTOSHKUMAR.BELCHADA@ORACLE.COM','IC4','VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('RAGHUNANDA.DANAYAKANAKERI@ORACLE.COM','IC4','VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('ELAMPARITHY.GL@ORACLE.COM', 'IC3','VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('PAVAN.KUMAR.GUJJARLAPUDI@ORACLE.COM','IC4','VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('PREMCHAND.X.KALLAM@ORACLE.COM','IC4','VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('BALAJI.NALLASAMY@ORACLE.COM','IC4','VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('SUDHAKAR.NANJAREDDY@ORACLE.COM','IC4','VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('KRISHNARAJ.RADHAKRISHNAPILLAI@ORACLE.COM','IC4','VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('MANOJ.THAKKAN@ORACLE.COM','IC4','VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('SARAVANAN.SUBBURAJ@ORACLE.COM','IC4','VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('RAJDEEP.S.SINGH@ORACLE.COM','IC4','VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('ARUNKUMAR.SANTHARAM@ORACLE.COM','IC3','VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('AMITH.RUNGTA@ORACLE.COM','IC3','VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('NIRANJAN.P.PANCHALINGHAM@ORACLE.COM','IC3','VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('VARAHALA.REDDY.PALLERLA@ORACLE.COM','IC3','VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('SHIVA.S.PRASAD@ORACLE.COM','IC3','VIJAYSHANKAR.BALAKRISHNAN@ORACLE.COM' );


INSERT INTO  TT_EMPLOYEE VALUES ('KUNAL.PATEL@ORACLE.COM','IC5','SHRIKANT.GAVALI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('MANUKRISHNAN.SR@ORACLE.COM','IC2','SHRIKANT.GAVALI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('VENKATA.PANCHUMARTHI@ORACLE.COM','IC2','SHRIKANT.GAVALI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('GOBINATH.VETRIVEL@ORACLE.COM','IC4','SHRIKANT.GAVALI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('DARSHAN.PX@ORACLE.COM','IC2','SHRIKANT.GAVALI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('M.MAYILSELVAN.SUBRAMANIAN@ORACLE.COM','IC4','SHRIKANT.GAVALI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('ANIL.SEELAM@ORACLE.COM','IC4','SHRIKANT.GAVALI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('KIDAMBI.RAJAGOPAL@ORACLE.COM','IC4','SHRIKANT.GAVALI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('SANJAY.PUTTASWAMY@ORACLE.COME','IC4','SHRIKANT.GAVALI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('SRIDHAR.NARAYANA.RAO@ORACLE.COM','IC4','SHRIKANT.GAVALI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('SANTOSH.LAKKANAGOUDRA@ORACLE.COM','IC4','SHRIKANT.GAVALI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('ABHISHEK.KOTIAN@ORACLE.COM','IC4','SHRIKANT.GAVALI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('ARAVIND.KOSURI@ORACLE.COM','IC4','SHRIKANT.GAVALI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('JAIDEEP.CHANDRASHEKARA@ORACLE.COM','IC4','SHRIKANT.GAVALI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('MOHAMMED.NIZAMUDDIN@ORACLE.COM','IC3','SHRIKANT.GAVALI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('KARPAGARAGUPATHY.MAGUDAPATHY@ORACLE.COM','IC3','SHRIKANT.GAVALI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('RAVI.AF.KUMAR@ORACLE.COM','IC3','SHRIKANT.GAVALI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('MANOJ.ADIYATH@ORACLE.COM','IC4','SHRIKANT.GAVALI@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('RAKESH.DASHPUTE@ORACLE.COM','IC4','SHRIKANT.GAVALI@ORACLE.COM' );


INSERT INTO  TT_EMPLOYEE VALUES ('SENTHILKUMAR.A.S@ORACLE.COM','IC4','SHIJU.MAMMEN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('SAJITH.NARAYANANKUTTY@ORACLE.COM','IC4','SHIJU.MAMMEN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('JAGAN.X.MOHAN@ORACLE.COM','IC4','SHIJU.MAMMEN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('ANIL.KUMAR@ORACLE.COM','IC4','SHIJU.MAMMEN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('BALAJI.JAYARAMAN@ORACLE.COM','IC4','SHIJU.MAMMEN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('SAM.GEORGE@ORACLE.COM','IC4','SHIJU.MAMMEN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('VANDANA.BASAVA@ORACLE.COM','IC4','SHIJU.MAMMEN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('NAGARAJU.TATHIKONDA@ORACLE.COM','IC4','SHIJU.MAMMEN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('BHARGHAV.VARRI@ORACLE.COM','IC3','SHIJU.MAMMEN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('NAJEEB.SHAIK@ORACLE.COM','IC3','SHIJU.MAMMEN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('RENJITH.N.KUMAR@ORACLE.COM','IC3','SHIJU.MAMMEN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('SANTHOSH.MANDAGURU@ORACLE.COM','IC3','SHIJU.MAMMEN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('RAJU.KALLEM@ORACLE.COM','IC3','SHIJU.MAMMEN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('NEHA.NE.GUPTA@ORACLE.COM','IC3','SHIJU.MAMMEN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('RAGHAVENDRA.BOMMISETTY@ORACLE.COM','IC3','SHIJU.MAMMEN@ORACLE.COM' );
INSERT INTO  TT_EMPLOYEE VALUES ('PAYAL.BANSAL@ORACLE.COM','IC3','SHIJU.MAMMEN@ORACLE.COM' );
	





INSERT INTO TABLE TTEVENT_SESSIONS VALUES ('12345','1','Banglore','17-OCT-16 14.00.00.00 PM',INTERVAL '5' DAY,INTERVAL '2' HOUR)
INSERT INTO TABLE TTEVENT_SESSIONS VALUES ('12345','2','Banglore','21-NOV-16 14.00.00.00 PM',INTERVAL '5' DAY,INTERVAL '2' HOUR)

INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','1','RAKESH.DASHPUTE@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','1','PREMCHAND.X.KALLAM@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','1','RAGHUNANDA.DANAYAKANAKERI@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','1','KAUSHAL.ANAND@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','1','SAJITH.NARAYANANKUTTY@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','1','MANOJ.ADIYATH@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','1','RAJU.KALLEM@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','1','NAGARAJU.TATHIKONDA@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','1','GOBINATH.VETRIVEL@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','1','RENJITH.N.KUMAR@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','1','SRINIVASA.NANDURI@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','1','SHIVA.S.PRASAD@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','1','AMITH.RUNGTA@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','1','SRINIVAS.DUSA@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','1','ANIL.SEELAM@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','1','KIDAMBI.RAJAGOPAL@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','1','RAJDEEP.S.SINGH@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','1','ELAMPARITHY.GL@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');



INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','2','VENKATA.PANCHUMARTHI@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','2','DARSHAN.PX@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','2','SHILPA.RANI@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','2','MANUKRISHNAN.SR@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','2','KUNAL.PATEL@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','2','NAJEEB.SHAIK@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','2','SANTHOSH.MANDAGURU@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','2','ARAVIND.KOSURI@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','2','NEHA.NE.GUPTA@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','2','M.MAYILSELVAN.SUBRAMANIAN@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','2','SUDHAKAR.NANJAREDDY@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','2','SANTOSHKUMAR.BELCHADA@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','2','PAYAL.BANSAL@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','2','PAVAN.KUMAR.GUJJARLAPUDI@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','2','ARUNKUMAR.SANTHARAM@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','2','KRISHNARAJ.RADHAKRISHNAPILLAI@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');
INSERT INTO  TTESESSIONS_ATTENDEE VALUES ('12345','2','NIRANJAN.P.PANCHALINGHAM@ORACLE.COM' ,'SHRIKANT.GAVALI@ORACLE.COM');



----------------------------------------------


CREATE VIEW Events AS
  SELECT E.TRAINING_NAME ,S.SESSION_ID , E.DISCRIPTION ,E.PRESENTOR_ID1,E.PRESENTOR_ID2,E.PRESENTOR_ID3,E.PRESENTOR_ID4,E.PRESENTOR_ID5,S.LOCATION,S.STATUS
  FROM TT_EVENT as E 
  INNER JOIN TTEVENT_SESSIONS as S 
  ON S.TRAINING_ID = E.TRAINING_ID
  
  SELECT E.TRAINING_NAME ,S.SESSION_ID , E.DISCRIPTION ,E.PRESENTOR_ID1,E.PRESENTOR_ID2,E.PRESENTOR_ID3,E.PRESENTOR_ID4,E.PRESENTOR_ID5,S.LOCATION,S.STATUS, to_char(S.FROM_DATETIMEL,'DD-MON-YYYY') STARTDATEL ,to_char(S.FROM_DATETIMEL + S.NUMBER_OF_DAYS - INTERVAL '1' DAY , 'DD-MON-YYYY') ENDDATEL , to_char ( S.FROM_DATETIMEL , 'HH24:MI:SS' ) STARTTIMEL , to_char (S.FROM_DATETIMEL + S.INTERVAL  , 'HH24:MI:SS' ) ENDTIMEL , E.TOWORDS_PLA_FAMILY,E.TOWORDS_PLA_AREAS,E.NUMBER_OF_SESSIONS,E.OWNED_BY,E.LOCATION
  FROM TT_EVENT E   INNER JOIN TTEVENT_SESSIONS S   ON S.TRAINING_ID = E.TRAINING_ID ;
  
  
  SELECT FROM_DATETIMEL , FROM_DATETIMEL + NUMBER_OF_DAYS FROM TTEVENT_SESSIONS
  
CREATE TABLE TT_EVENT  (
      TRAINING_ID  				NUMBER(10)
   ,  TRAINING_NAME  			VARCHAR(70)
   ,  DISCRIPTION 				VARCHAR(3000)
   ,  TOWORDS_PLA_FAMILY  		VARCHAR(30)
   ,  TOWORDS_PLA_AREAS 		VARCHAR(30)
   ,  NUMBER_OF_SESSIONS		NUMBER (2)
   ,  PRESENTOR_ID1 			VARCHAR (50)
   ,  PRESENTOR_ID2 			VARCHAR (50)
   ,  PRESENTOR_ID3 			VARCHAR (50)
   ,  PRESENTOR_ID4 			VARCHAR (50)
   ,  PRESENTOR_ID5 			VARCHAR (50)   
   ,  							VARCHAR(10)       
   ,  OWNED_BY					VARCHAR(50)
   ,  CONSTRAINT TE_training_id_pk  PRIMARY KEY (TRAINING_ID)
);


CREATE TABLE TTEVENT_SESSIONS  (
       TRAINING_ID  		NUMBER(15)
   ,   SESSION_ID			NUMBER(2)
   ,   LOCATION 			VARCHAR(50)
   ,   FROM_DATETIMEL		TIMESTAMP(2) WITH LOCAL TIME ZONE;
   ,   FROM_DATETIMEG		TIMESTAMP(2) WITH TIME ZONE;
   ,   NUMBER_OF_DAYS 		INTERVAL DAY(2) TO SECOND(0)
   ,   INTERVAL				INTERVAL DAY(1) TO SECOND(0)
   ,   STATUS 				VARCHAR(20)
   ,   CONSTRAINT TTE_sessions_pk  PRIMARY KEY (TRAINING_ID,SESSION_ID)
   ,   CONSTRAINT ttes_id_fk  FOREIGN KEY  (TRAINING_ID) references TT_EVENT(TRAINING_ID) ON DELETE CASCADE
);




SELECT E.TRAINING_NAME || ' Session -' || S.SESSION_ID  AS NAME , S.FROM_DATETIMEL ,
       S.FROM_DATETIMEL+ S.NUMBER_OF_DAYS + S.INTERVAL - INTERVAL '1' DAY AS ENDDATEL 
FROM TT_EVENT E   INNER JOIN TTEVENT_SESSIONS S   ON S.TRAINING_ID = E.TRAINING_ID




CREATE TABLE TTE_PLA_INFO (
	PLA_FAMILY	VARCHAR(30),
	PLA_AREA	VARCHAR(30),
	CONSTRAINT TTE_PLA_INFO_pk  PRIMARY KEY (PLA_FAMILY,PLA_AREA)
);


INSERT INTO  questions  (Q1,Q2,Q3,Q4,Q5,Q6,Q7,Q8,Q9,Q10) VALUES ('The objective of the training was clearly defined',' The topics covered were relevant to me','Participation and interaction were encouraged', 'I will be able to apply the knowledge learned','The trainer was well prepared','The training met my expectations','How do you rate the training Overall?','Any specific comments/feedback about Instructor','Please specify your preference for such training's in future','Are you looking for any other training in future ? if yes, specify the topics');


Begin
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Database','DB Specialization','Unspecified');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Database','DB Specialization','Content Management');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Database','DB Specialization','Software Development and Windows');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Database','DB Specialization','Specialized Technology and Platforms');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Database','DB Specialization','Unspecified');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Eng Systems','Unspecified','Unspecified');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Eng Systems','Engineered Systems','Unspecified');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Eng Systems','Engineered Systems','Engineered Systems Defects');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Eng Systems','Engineered Systems','Oracle Backup Appliance');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Eng Systems','Engineered Systems','Platinum SE');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Eng Systems','Engineered Systems','Unspecified');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Middleware','Unspecified','Unspecified');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Middleware','Application Server','Unspecified');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Middleware','Application Server','AS Core');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Middleware','Application Server','Certification - Application Server');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Middleware','Application Server','Coherence');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Middleware','Application Server','Defect - Application Server');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Middleware','Application Server','Glassfish');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Middleware','Application Server','Java');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Middleware','Application Server','OVAB');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Middleware','Application Server','SES');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Middleware','Application Server','Sun Web Server');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Middleware','Application Server','Transaction Processing');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Middleware','Application Server','Unspecified');
INSERT INTO  TTE_PLA_INFO (PLA_LINE,PLA_FAMILY,PLA_AREA) VALUES ('Middleware','Application Server','WebLogic Server');
end;

DECLARE  
  l_sql VARCHAR2(32700);  
BEGIN  
  IF APEX_APPLICATION.G_x01 IS NOT NULL THEN  
    APEX_UTIL.SET_SESSION_STATE('G_TEMP', APEX_APPLICATION.G_x01);  
    l_sql := '  
      SELECT COUNTRY  DIS,  
             COUNTRY RET  
      FROM   TTE_COUNTRY_REGION
      WHERE  REGION = :G_TEMP  
      ORDER BY 1  
    ';  
  APEX_UTIL.JSON_FROM_SQL(l_sql);  
  ELSE  
    HTP.prn('{"row":[]}');  
  END IF;  
  APEX_UTIL.SET_SESSION_STATE('G_TEMP', NULL);  
END;  



$("[name=f06]").htmldbCascade(
 "[name=f05]",
 "GET_REGION",{
  nullShow:true,
  nullDisplay:"- Select -"
});


 
 
PLA_FAMILY			PLA_AREA
Unspecified		   Unspecified
DB Foundation      DB Admin
DB Foundation      DB Install
DB Foundation      DB Networking
DB Foundation      DB Performance
DB Foundation      Manageability
DB Foundation      Security Products
DB Foundation      Unspecified
DB Systems 			DB Data Warehouse
DB Systems 			DB SSC
DB Systems 			DB: BETA
DB Systems 			High Availability
DB Systems 			Information Integration
DB Systems 			Scalability
DB Systems 			Storage Management
DB Systems 			Unspecified


select PLA_FAMILY,
       PLA_FAMILY as returnplafamily
  from TTE_PLA_INFO
 order by 1
 
 
 select PLA_AREA,
       PLA_AREA as returnplaarea
  from TTE_PLA_INFO
 where PLA_FAMILY = :P3_TOWARDS_PLA_FAMILY
 order by 1
 
 APAC
EMEA
JAPAN
LATAM
N_AMER
Unspecified
  APEX_ITEM.POPUPKEY_FROM_QUERY (1,Region,'SELECT REGION, REGION as returnRegion FROM TTE_REGION') 
  
  APEX_ITEM.TEXT_FROM_LOV_QUERY(Region,'SELECT REGION, REGION as returnRegion FROM TTE_REGION') 
 
begin
 CREATE TABLE TTE_REGION (
	REGION	VARCHAR(20),
);

INSERT INTO  TTE_REGION VALUES ('APAC');
INSERT INTO  TTE_REGION VALUES ('EMEA');
INSERT INTO  TTE_REGION VALUES ('JAPAN');
INSERT INTO  TTE_REGION VALUES ('LATAM');
INSERT INTO  TTE_REGION VALUES ('N_AMER');
INSERT INTO  TTE_REGION VALUES ('Unspecified');
end;
/



 CREATE TABLE TTE_COUNTRY (
	COUNTRY	VARCHAR(20),
);


begin
INSERT INTO  TTE_COUNTRY VALUES ('Unspecified');
INSERT INTO  TTE_COUNTRY VALUES ('AA');
INSERT INTO  TTE_COUNTRY VALUES ('Algeria');
INSERT INTO  TTE_COUNTRY VALUES ('Argentina');
INSERT INTO  TTE_COUNTRY VALUES ('Armenia');
INSERT INTO  TTE_COUNTRY VALUES ('Aruba');
INSERT INTO  TTE_COUNTRY VALUES ('Australia');
INSERT INTO  TTE_COUNTRY VALUES ('Austria');
INSERT INTO  TTE_COUNTRY VALUES ('Azerbaijan');
INSERT INTO  TTE_COUNTRY VALUES ('Bahamas');
INSERT INTO  TTE_COUNTRY VALUES ('Bahrain');
INSERT INTO  TTE_COUNTRY VALUES ('Bangladesh');
INSERT INTO  TTE_COUNTRY VALUES ('Barbados');
INSERT INTO  TTE_COUNTRY VALUES ('Belarus');
INSERT INTO  TTE_COUNTRY VALUES ('Belgium');
INSERT INTO  TTE_COUNTRY VALUES ('Belize');
INSERT INTO  TTE_COUNTRY VALUES ('Bermuda');
INSERT INTO  TTE_COUNTRY VALUES ('Bolivia');
INSERT INTO  TTE_COUNTRY VALUES ('Bosnia and Herzegovina');
INSERT INTO  TTE_COUNTRY VALUES ('Botswana');
INSERT INTO  TTE_COUNTRY VALUES ('Brazil');
INSERT INTO  TTE_COUNTRY VALUES ('Brunei Darussalam');
INSERT INTO  TTE_COUNTRY VALUES ('Bulgaria');
INSERT INTO  TTE_COUNTRY VALUES ('CO');
INSERT INTO  TTE_COUNTRY VALUES ('CS');
INSERT INTO  TTE_COUNTRY VALUES ('Cameroon');
INSERT INTO  TTE_COUNTRY VALUES ('Canada');
INSERT INTO  TTE_COUNTRY VALUES ('Chile');
INSERT INTO  TTE_COUNTRY VALUES ('China');
INSERT INTO  TTE_COUNTRY VALUES ('Colombia');
INSERT INTO  TTE_COUNTRY VALUES ('Costa Rica');
INSERT INTO  TTE_COUNTRY VALUES ('Cote d'Ivoire');
INSERT INTO  TTE_COUNTRY VALUES ('Croatia');
INSERT INTO  TTE_COUNTRY VALUES ('Cyprus');
INSERT INTO  TTE_COUNTRY VALUES ('Czech Republic');
INSERT INTO  TTE_COUNTRY VALUES ('Denmark');
INSERT INTO  TTE_COUNTRY VALUES ('Dominican Republic');
INSERT INTO  TTE_COUNTRY VALUES ('Ecuador');
INSERT INTO  TTE_COUNTRY VALUES ('Egypt');
INSERT INTO  TTE_COUNTRY VALUES ('El Salvador');
INSERT INTO  TTE_COUNTRY VALUES ('Estonia');
INSERT INTO  TTE_COUNTRY VALUES ('Finland');
INSERT INTO  TTE_COUNTRY VALUES ('France');
INSERT INTO  TTE_COUNTRY VALUES ('Germany');
INSERT INTO  TTE_COUNTRY VALUES ('Ghana');
INSERT INTO  TTE_COUNTRY VALUES ('Greece');
INSERT INTO  TTE_COUNTRY VALUES ('Guam');
INSERT INTO  TTE_COUNTRY VALUES ('Guatemala');
INSERT INTO  TTE_COUNTRY VALUES ('Honduras');
INSERT INTO  TTE_COUNTRY VALUES ('Hong Kong');
INSERT INTO  TTE_COUNTRY VALUES ('Hungary');
INSERT INTO  TTE_COUNTRY VALUES ('Iceland');
INSERT INTO  TTE_COUNTRY VALUES ('India');
INSERT INTO  TTE_COUNTRY VALUES ('Indonesia');
INSERT INTO  TTE_COUNTRY VALUES ('Ireland');
INSERT INTO  TTE_COUNTRY VALUES ('Israel');
INSERT INTO  TTE_COUNTRY VALUES ('Italy');
INSERT INTO  TTE_COUNTRY VALUES ('Jamaica');
INSERT INTO  TTE_COUNTRY VALUES ('Japan');
INSERT INTO  TTE_COUNTRY VALUES ('Jordan');
INSERT INTO  TTE_COUNTRY VALUES ('Kazakhstan');
INSERT INTO  TTE_COUNTRY VALUES ('Kenya');
INSERT INTO  TTE_COUNTRY VALUES ('Korea, Republic of');
INSERT INTO  TTE_COUNTRY VALUES ('Kuwait');
INSERT INTO  TTE_COUNTRY VALUES ('Latvia');
INSERT INTO  TTE_COUNTRY VALUES ('Lebanon');
INSERT INTO  TTE_COUNTRY VALUES ('Libyan Arab Jamahiriya');
INSERT INTO  TTE_COUNTRY VALUES ('Lithuania');
INSERT INTO  TTE_COUNTRY VALUES ('Luxembourg');
INSERT INTO  TTE_COUNTRY VALUES ('MX');
INSERT INTO  TTE_COUNTRY VALUES ('Macao');
INSERT INTO  TTE_COUNTRY VALUES ('Macedonia, The Former Yugoslav');
INSERT INTO  TTE_COUNTRY VALUES ('Malaysia');
INSERT INTO  TTE_COUNTRY VALUES ('Malta');
INSERT INTO  TTE_COUNTRY VALUES ('Mauritius');
INSERT INTO  TTE_COUNTRY VALUES ('Mexico');
INSERT INTO  TTE_COUNTRY VALUES ('Morocco');
INSERT INTO  TTE_COUNTRY VALUES ('Netherlands');
INSERT INTO  TTE_COUNTRY VALUES ('New Zealand');
INSERT INTO  TTE_COUNTRY VALUES ('Nicaragua');
INSERT INTO  TTE_COUNTRY VALUES ('Nigeria');
INSERT INTO  TTE_COUNTRY VALUES ('Norway');
INSERT INTO  TTE_COUNTRY VALUES ('Obsolete see CS territory');
INSERT INTO  TTE_COUNTRY VALUES ('Oman');
INSERT INTO  TTE_COUNTRY VALUES ('Pakistan');
INSERT INTO  TTE_COUNTRY VALUES ('Panama');
INSERT INTO  TTE_COUNTRY VALUES ('Peru');
INSERT INTO  TTE_COUNTRY VALUES ('Philippines');
INSERT INTO  TTE_COUNTRY VALUES ('Poland');
INSERT INTO  TTE_COUNTRY VALUES ('Portugal');
INSERT INTO  TTE_COUNTRY VALUES ('Puerto Rico');
INSERT INTO  TTE_COUNTRY VALUES ('Qatar');
INSERT INTO  TTE_COUNTRY VALUES ('Republic of Montenegro');
INSERT INTO  TTE_COUNTRY VALUES ('Republic of Serbia');
INSERT INTO  TTE_COUNTRY VALUES ('Reunion');
INSERT INTO  TTE_COUNTRY VALUES ('Romania');
INSERT INTO  TTE_COUNTRY VALUES ('Russian Federation');
INSERT INTO  TTE_COUNTRY VALUES ('Saint Lucia');
INSERT INTO  TTE_COUNTRY VALUES ('Saudi Arabia');
INSERT INTO  TTE_COUNTRY VALUES ('Senegal');
INSERT INTO  TTE_COUNTRY VALUES ('Serbia');
INSERT INTO  TTE_COUNTRY VALUES ('Singapore');
INSERT INTO  TTE_COUNTRY VALUES ('Slovakia');
INSERT INTO  TTE_COUNTRY VALUES ('Slovenia');
INSERT INTO  TTE_COUNTRY VALUES ('South Africa');
INSERT INTO  TTE_COUNTRY VALUES ('Spain');
INSERT INTO  TTE_COUNTRY VALUES ('Sri Lanka');
INSERT INTO  TTE_COUNTRY VALUES ('Sweden');
INSERT INTO  TTE_COUNTRY VALUES ('Switzerland');
INSERT INTO  TTE_COUNTRY VALUES ('Taiwan');
INSERT INTO  TTE_COUNTRY VALUES ('Tanzania, United Republic of');
INSERT INTO  TTE_COUNTRY VALUES ('Thailand');
INSERT INTO  TTE_COUNTRY VALUES ('Trinidad and Tobago');
INSERT INTO  TTE_COUNTRY VALUES ('Tunisia');
INSERT INTO  TTE_COUNTRY VALUES ('Turkey');
INSERT INTO  TTE_COUNTRY VALUES ('US');
INSERT INTO  TTE_COUNTRY VALUES ('Uganda');
INSERT INTO  TTE_COUNTRY VALUES ('Ukraine');
INSERT INTO  TTE_COUNTRY VALUES ('United Arab Emirates');
INSERT INTO  TTE_COUNTRY VALUES ('United Kingdom');
INSERT INTO  TTE_COUNTRY VALUES ('United States');
INSERT INTO  TTE_COUNTRY VALUES ('Uruguay');
INSERT INTO  TTE_COUNTRY VALUES ('Venezuela');
INSERT INTO  TTE_COUNTRY VALUES ('Viet Nam');
INSERT INTO  TTE_COUNTRY VALUES ('Virgin Islands, British');
INSERT INTO  TTE_COUNTRY VALUES ('Yemen');
INSERT INTO  TTE_COUNTRY VALUES ('Zambia');
INSERT INTO  TTE_COUNTRY VALUES ('Zimbabwe');
end;
/



--- CREATE VIEW --
CREATE OR REPLACE FORCE EDITIONABLE VIEW "EVENTSCHEDULE" ("EVENT_ID","EVENT_NAME", "DISCRIPTION", "PRESENTOR1", "PRESENTOR2", "PRESENTOR3", "PRESENTOR4", "PRESENTOR_5", "EVENT_TYPE","EVENT_VISIBILITY","EVENT_RESOURCE_LINK","TOWARDS_PLA_FAMILY","TOWARDS_PLA_AREA", "SESSION_STARTDATEL", "SESSION_ENDDATEL", "SESSION_STARTTIMEL", "SESSION_ENDTIMEL", "OWNED_BY", "SESSION_MODE", "REGION", "COUNTRY","LOCATION","SESSION_STATUS","SCHEDULED_TIME",SCHEDULED_ENDTIME,"DAYS","HOURS_PER_DAY") AS 
 SELECT E.TRAINING_ID, E.TRAINING_NAME ||' Session ' || S.SESSION_ID  AS NAME, E.DISCRIPTION ,E.PRESENTOR_ID1,E.PRESENTOR_ID2,E.PRESENTOR_ID3,E.PRESENTOR_ID4,E.PRESENTOR_ID5, E.TYPE, E.VISIBILITY ,E.TTRESOURCE ,E.TOWARDS_PLA_FAMILY, E.TOWARDS_PLA_AREA,
to_date(to_char(S.FROM_DATETIMEL,'DD-MON-YYYY'), 'DD-MON-YYYY') STARTDATEL ,to_date(to_char(S.FROM_DATETIMEL + S.NUMBER_OF_DAYS - INTERVAL '1' DAY , 'DD-MON-YYYY'),'DD-MON-YYYY') ENDDATEL , 
to_char ( S.FROM_DATETIMEL , 'HH24:MI:SS' ) STARTTIMEL , to_char (S.FROM_DATETIMEL + S.INTERVAL  , 'HH24:MI:SS' ) ENDTIMEL, E.OWNED_BY , S.SESSSION_MODE, S.REGION , S.COUNTRY , S.LOCATION,S.STATUS,S.FROM_DATETIMEL,S.FROM_DATETIMEL + S.INTERVAL +S.NUMBER_OF_DAYS - INTERVAL '1' DAY ,EXTRACT (DAY FROM  S.NUMBER_OF_DAYS) DAYS ,  EXTRACT (HOUR FROM  S.INTERVAL  )  HOURS
FROM TT_EVENT E   INNER JOIN TTEVENT_SESSIONS S   ON S.TRAINING_ID = E.TRAINING_ID
/



 CREATE TABLE TTE_COUNTRY_REGION (
	COUNTRY	VARCHAR(20),
	REGION	VARCHAR(20), 
);
INSERT INTO  TTE_COUNTRY_REGION VALUES ('Unspecified','Unspecified');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('Unspecified','JAPAN');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('Unspecified','APAC');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('Unspecified','LATAM');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('Unspecified','N_AMER');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('Unspecified','EMEA');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('JAPAN','JAPAN');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('AUSTRALIA','APAC');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('CHINA','APAC');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('INDIA','APAC');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('KOREA, REPUBLIC OF','APAC');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('NEW ZEALAND','APAC');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('COSTA RICA','LATAM');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('CANADA','N_AMER');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('UNITED STATES','N_AMER');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('EGYPT','EMEA');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('GERMANY','EMEA');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('POLAND','EMEA');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('PORTUGAL','EMEA');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('ROMANIA','EMEA');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('SPAIN','EMEA');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('SWITZERLAND','EMEA');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('TURKEY','EMEA');
INSERT INTO  TTE_COUNTRY_REGION VALUES ('UNITED KINGDOM','EMEA');


-----------------------------------------------------------------------------------------------------------------


###########
PAGE 1
###########

-- Ongoing Events --
SELECT EVENT_NAME,TOWARDS_PLA_AREA AS TEAM ,SCHEDULED_TIME, DAYS,SESSION_MODE,REGION,COUNTRY,LOCATION FROM EVENTSCHEDULE  WHERE	SESSION_STATUS='Ongoing' AND EVENT_VISIBILITY='open';
/

-- Upcoming Events --
SELECT EVENT_NAME,TOWARDS_PLA_AREA AS TEAM ,SCHEDULED_TIME, DAYS,SESSION_MODE,REGION,COUNTRY,LOCATION FROM EVENTSCHEDULE  WHERE	SESSION_STATUS='Upcoming' AND EVENT_VISIBILITY='open';
/



-- TimeLine --		
SELECT EVENT_NAME ,SESSION_STARTDATEL, SESSION_ENDDATEL,DISCRIPTION FROM EVENTSCHEDULE  WHERE EVENT_VISIBILITY='open' AND SESSION_STARTDATEL  BETWEEN ADD_MONTHS(TRUNC(SYSDATE, 'MM'), -6) AND ADD_MONTHS(TRUNC(SYSDATE, 'MM'), +12)  ;
/



---------------------------------------------------------------------------------------------------------------------



###########
PAGE 2
###########






-- Calendar  --		
SELECT EVENT_NAME ,SCHEDULED_TIME , SCHEDULED_ENDTIME FROM EVENTSCHEDULE ;
/






-----------------------------------------------------------------------------------------------------------------------------



###################
PAGE 3
###################






 CREATE SEQUENCE   "TT_EVENT_ID_SEQ"  MINVALUE 1 MAXVALUE 999999 INCREMENT BY 1 START WITH 83 NOCACHE  NOORDER  NOCYCLE  NOPARTITION;
 
----------------------------------------------
=======================================================================================================

DECLARE 
	--  Declare all required variable 
    numberOfSession       pls_integer;
    tt_event_id 		  TT_EVENT.TRAINING_ID%type;
	
BEGIN

	--  Before insert of event generate its id.
	
		--tt_event_id := TT_EVENT_ID_SEQ.NEXTVAL;
        select TT_EVENT_ID_SEQ.NEXTVAl into tt_event_id from dual;
		
		
	-- Insert event detais  into TT_EVENT 

	--	INSERT INTO TT_EVENT  VALUES(tt_event_id,:P3_TRAINING_NAME,:P3_DISCRIPTION,:P3_TOWARDS_PLA_FAMILY,:P3_TOWARDS_PLA_AREA,:P3_NUMBER_OF_SESSION,:P3_PRESENTER1,:P3_PRESENTER2,:P3_PRESENTER3,:P3_PRESENTER4,:P3_PRESENTER5,:P3_OWNED_BY,:P3_VISIBILITY,:P3_REPOSITORY);
		INSERT INTO TT_EVENT  VALUES(tt_event_id,:P3_TRAINING_NAME,:P3_DISCRIPTION,:P3_NUMBER_OF_SESSION,:P3_PRESENTER1,:P3_PRESENTER2,:P3_PRESENTER3,:P3_PRESENTER4,:P3_PRESENTER5,:P3_OWNED_BY,:P3_VISIBILITY,:P3_REPOSITORY,:P3_TOWARDS_PLA_FAMILY,:P3_TOWARDS_PLA_AREA,:P3_TTTHUMBNAIL,:P3_EVENT_TYPE);					
    -- For each session of this event , insert session details into  table TTEVENT_SESSIONS  
    -- TRAINING_ID,SESSION_ID,LOCATION,FROM_DATETIMEL,FROM_DATETIMEG,NUMBER_OF_DAYS,INTERVAL,STATUS,COUNTRY,REGION,TYPE	

						
		NumberofSession := :P3_NUMBER_OF_SESSION;

		  FOR i IN 1..numberOfSession
		  LOOP



		  INSERT INTO TTEVENT_SESSIONS  
 -- VALUES(tt_event_id,i,APEX_APPLICATION.G_F07(i),APEX_APPLICATION.G_F02(i),'',INTERVAL  APEX_APPLICATION.G_F03(i)  DAY , INTERVAL  APEX_APPLICATION.G_F04(i)  HOUR , 'UpComing',APEX_APPLICATION.G_F05(i),APEX_APPLICATION.G_F06(i),APEX_APPLICATION.G_F08(i) );
 -- VALUES(tt_event_id,i,APEX_APPLICATION.G_F07(i),APEX_APPLICATION.G_F02(i),'',INTERVAL '5' DAY , INTERVAL  '8'  HOUR , 'UpComing',APEX_APPLICATION.G_F05(i),APEX_APPLICATION.G_F06(i),APEX_APPLICATION.G_F08(i) );
          VALUES(tt_event_id,i,APEX_APPLICATION.G_F07(i),APEX_APPLICATION.G_F02(i),'',NUMTODSINTERVAL(APEX_APPLICATION.G_F03(i),'DAY')  , NUMTODSINTERVAL(APEX_APPLICATION.G_F04(i),'HOUR') , 'UpComing',APEX_APPLICATION.G_F05(i),APEX_APPLICATION.G_F06(i),APEX_APPLICATION.G_F08(i) );

		  END LOOP;
		  
		  
END;





------------------------------------------------------------------------------------------------------------
		
		
		
###################
PAGE 4
###################







---------------------------------------------------------------------------------------------------------------------



DECLARE 
    pls_eventid pls_integer;

BEGIN
    pls_eventid := :P9_EVENT_ID;
   	
	TRAINING_ID	SESSION_ID	LOCATION	FROM_DATETIMEL	FROM_DATETIMEG	NUMBER_OF_DAYS	INTERVAL	STATUS	COUNTRY	REGION	SESSSION_MODE
	
	SELECT TRAINING_NAME,DISCRIPTION,NUMBER_OF_SESSIONS,PRESENTOR_ID1,PRESENTOR_ID2,PRESENTOR_ID3,PRESENTOR_ID4,PRESENTOR_ID5,OWNED_BY,VISIBILITY,TTRESOURCE,TOWARDS_PLA_FAMILY,TOWARDS_PLA_AREA,TTTHUMBNAIL,TYPE
 INTO  :P9_TRAINING_NAME,:P9_DISCRIPTION,:P9_NUMBER_OF_SESSION,:P9_PRESENTER1,:P9_PRESENTER2,:P9_PRESENTER3,:P9_PRESENTER4,
  :P9_PRESENTER5,:P9_OWNED_BY,:P9_VISIBILITY,:P9_REPOSITORY,:P9_TOWARDS_PLA_FAMILY,:P9_TOWARDS_PLA_AREA,:P9_TTTHUMBNAIL,:P9_EVENT_TYPE  FROM TT_EVENT WHERE TRAINING_ID = :P9_EVENT_ID ;
	
VALUES(tt_event_id,i,APEX_APPLICATION.G_F07(i),APEX_APPLICATION.G_F02(i),'',NUMTODSINTERVAL(APEX_APPLICATION.G_F03(i),'DAY')  , NUMTODSINTERVAL(APEX_APPLICATION.G_F04(i),'HOUR') , 'UpComing',APEX_APPLICATION.G_F05(i),APEX_APPLICATION.G_F06(i),APEX_APPLICATION.G_F08(i) );


FOR i IN 1..NumberofSession
LOOP



END LOOP;
 
 
 



 BEGIN
  FOR events IN (
    SELECT TRAINING_ID,SESSION_ID,LOCATION,FROM_DATETIMEL,FROM_DATETIMEG,NUMBER_OF_DAYS,INTERVAL,STATUS,COUNTRY,REGION,SESSSION_MODE
	FROM  TTEVENT_SESSIONS  WHERE TRAINING_ID = pls_eventid 
  LOOP

   
htp.p('<table>');

htp.p('<tr><td>'||APEX_ITEM.DISPLAY_AND_SAVE(p_idx => 1,p_value => 'SESSION '|| events.SESSION_ID, p_item_id => 'sessionid') || '</td><td><br></td></tr>');

htp.p('<tr><td class="t-Form-label"><br>From Date & Time (In Your Local Time Zone)  </td><td><div class="t-Form-inputContainer col col-9">'|| APEX_ITEM.DATE_POPUP2( p_idx => 2,p_value => events.FROM_DATETIMEL, p_date_format =>'DD-MON-YYYY HH24:MI:SS', p_navigation_list_for=>'MONTH_AND_YEAR')   || '</div></td></tr>');

htp.p('<tr><td class="t-Form-label"> Number Of Days  </td><td > <div class="t-Form-inputContainer col col-9">'||APEX_ITEM.TEXT (p_idx => 3,p_value => events.NUMBER_OF_DAYS,p_size => 12,p_maxlength=>40,p_attributes => 'style="text-align:right" class="number_field"" ',p_item_id => NULL) || '</div></td></tr>');

htp.p('<tr><td class="t-Form-label"> Number Of Hours Per Day    </td><td> <div class="t-Form-inputContainer col col-9">'||APEX_ITEM.TEXT (p_idx => 4,p_value => events.INTERVAL,p_size => 12,p_maxlength=> 40,p_attributes =>'style="text-align:right" class="number_field"" ',p_item_id => NULL) || '</div></td></tr>');

htp.p('<tr><td class="t-Form-label">Region  </td><td ><div class="t-Form-inputContainer col col-9">'||  APEX_ITEM.SELECT_LIST_FROM_QUERY (p_idx => 5,p_value => events.REGION,p_query =>'SELECT REGION FROM TTE_REGION',p_show_null=>'NO',p_show_extra=>'NO',p_attributes=>'class="selectlist"' )  || '</div></td></tr>');

htp.p('<tr><td class="t-Form-label">Country </td><td><div class="t-Form-inputContainer col col-9">'||APEX_ITEM.SELECT_LIST_FROM_QUERY (  p_idx => 6,p_value =>events.COUNTRY,p_query => 'SELECT DISTINCT COUNTRY  FROM TTE_COUNTRY ORDER BY COUNTRY',p_show_null=>'NO',p_show_extra=>'NO',p_attributes=>'class="selectlist"') || '</div></td></tr>');

htp.p('<tr><td class="t-Form-label">Venue  </td><td><div class="t-Form-inputContainer col col-9">'||APEX_ITEM.TEXT (p_idx => 7,p_value =>events.LOCATION,p_size =>30 ,p_maxlength=>40,p_attributes =>'style="text-align:left" ',p_item_id =>NULL) || '</div></td></tr>');

htp.p('<tr><td class="t-Form-label"> Mode  </td><td>' || '<pre><div class="t-Form-inputContainer col col-9"> <fieldset tabindex="-1" class="radio_group">' ||

APEX_ITEM.RADIOGROUP(p_idx => 8 ,p_value => events.SESSSION_MODE,p_selected_value => 'In-House', p_display => '  In-House Only') || '<br>'||
APEX_ITEM.RADIOGROUP(p_idx => 8 ,p_value => events.SESSSION_MODE,p_selected_value => 'WebCast',p_display => '  WebCast Only') || '<br>' ||
APEX_ITEM.RADIOGROUP(p_idx => 8 ,p_value => events.SESSSION_MODE,p_selected_value => 'In-House & WebCast',p_display => '  In-House & WebCast')  || '</fieldset></div></pre></td></tr>');

htp.p('</table><br><br>');


END LOOP;

END
		


-------------


DECLARE 
    oldNumberOfSession       pls_integer;
	newNumberOfSession       pls_integer;
    tt_event_id 		  	 TT_EVENT.TRAINING_ID%type;
BEGIN

		
	  
		SELECT NUMBER_OF_SESSIONS into 	oldNumberOfSession FROM 	TT_EVENT
	    newNumberofSession := :P9_NUMBER_OF_SESSION;
       
	    UPDATE TT_EVENT
		    SET TRAINING_NAME = :P9_TRAINING_NAME,
      			DISCRIPTION	= :P9_DISCRIPTION,
				NUMBER_OF_SESSIONS	= :P9_NUMBER_OF_SESSION,
				PRESENTOR_ID1	= :P9_PRESENTER1,
				PRESENTOR_ID2	= :P9_PRESENTER2,
				PRESENTOR_ID3	= :P9_PRESENTER3,
				PRESENTOR_ID4	= :P9_PRESENTER4,
				PRESENTOR_ID5	= :P9_PRESENTER5,
				OWNED_BY	= :P9_OWNED_BY,
				VISIBILITY	= :P9_VISIBILITY,
				TTRESOURCE	= :P9_REPOSITORY,
				TOWARDS_PLA_FAMILY	= :P9_TOWARDS_PLA_FAMILY,
				TOWARDS_PLA_AREA	= :P9_TOWARDS_PLA_AREA,
				TTTHUMBNAIL	= :P9_TTTHUMBNAIL,
				TYPE = :P9_EVENT_TYPE
			WHERE TRAINING_ID = :P9_EVENT_ID;
	
	
	FOR i IN 1..oldNumberOfSession
	LOOP

	   UPDATE TTEVENT_SESSIONS  
	   SET 	   LOCATION	= APEX_APPLICATION.G_F07(i),
			   FROM_DATETIMEL	= APEX_APPLICATION.G_F02(i),	
			   NUMBER_OF_DAYS	= NUMTODSINTERVAL(APEX_APPLICATION.G_F03(i),'DAY'),
			   INTERVAL	= NUMTODSINTERVAL(APEX_APPLICATION.G_F04(i),'HOUR'),
			   COUNTRY= APEX_APPLICATION.G_F06(i),
			   REGION = APEX_APPLICATION.G_F05(i),	
			   SESSSION_MODE = APEX_APPLICATION.G_F08(i)
		WHERE TRAINING_ID	= :P9_EVENT_ID AND SESSION_ID = i;
	   	
	END LOOP;
		  
    FOR i IN oldNumberOfSession+1 .. newNumberofSession
	LOOP
	
	 INSERT INTO TTEVENT_SESSIONS
	 VALUES(:P9_EVENT_ID,i,APEX_APPLICATION.G_F07(i),APEX_APPLICATION.G_F02(i),'',NUMTODSINTERVAL(APEX_APPLICATION.G_F03(i),'DAY')  , NUMTODSINTERVAL(APEX_APPLICATION.G_F04(i),'HOUR') , 'UpComing',APEX_APPLICATION.G_F06(i),APEX_APPLICATION.G_F05(i),APEX_APPLICATION.G_F08(i) );

	END LOOP;  
	
	
END;




http://stevenfeuersteinonplsql.blogspot.in/2015/03/code-cleanup-post-authentication-in.html



TRAINING_ID	NUMBER(15,0)	No	- 	1
TRAINING_NAME	VARCHAR2(70)	Yes	- 	-
DISCRIPTION	VARCHAR2(3000)	Yes	- 	-
NUMBER_OF_SESSIONS	NUMBER(2,0)	Yes	- 	-
PRESENTOR_ID1	VARCHAR2(50)	No	- 	-
PRESENTOR_ID2	VARCHAR2(50)	Yes	- 	-
PRESENTOR_ID3	VARCHAR2(50)	Yes	- 	-
PRESENTOR_ID4	VARCHAR2(50)	Yes	- 	-
PRESENTOR_ID5	VARCHAR2(50)	Yes	- 	-
OWNED_BY	VARCHAR2(50)	Yes	- 	-
VISIBILITY	VARCHAR2(50)	No	- 	-
TTRESOURCE	VARCHAR2(500)	Yes	- 	-
TOWARDS_PLA_FAMILY	VARCHAR2(32)	Yes	- 	-
TOWARDS_PLA_AREA	VARCHAR2(32)	Yes	- 	-
TTTHUMBNAIL	VARCHAR2(300)	Yes	- 	-
TYPE	VARCHAR2(32)	Yes	- 

SELECT TRAINING_ID,TRAINING_NAME,VISIBILITY,TOWARDS_PLA_FAMILY,TOWARDS_PLA_AREA,TYPE FROM TT_EVENT WHERE OWNED_BY=:APP_USER





DECLARE 
    oldNumberOfSession       pls_integer;
    tt_event_id 		  	 TT_EVENT.TRAINING_ID%type;
BEGIN

		
	  
		SELECT NUMBER_OF_SESSIONS into 	oldNumberOfSession FROM TT_EVENT WHERE WHERE TRAINING_ID	= :P9_EVENT_ID;

	
	FOR i IN 1..oldNumberOfSession
	LOOP

	   DELETE FROM TTEVENT_SESSIONS  
		WHERE TRAINING_ID	= :P9_EVENT_ID AND SESSION_ID = i;
	   	
	END LOOP;
		
		
		
		DELETE FROM TT_EVENT
			WHERE TRAINING_ID = :P9_EVENT_ID;
	
	
	
	
	
END;

http://ora-00001.blogspot.sg/2016/01/working-with-the-apex-5-treeview.html
https://community.oracle.com/thread/3895811



DECLARE 
 deleteNode varchar(32767);
newInsertNode varchar(32767);
BEGIN

deleteNode = :P10_OLD_DELETE;
newInsertNode = :P10_NEW_INSERT;

FOR del IN (
select distinct regexp_substr(deleteNode, '[^:]+', 1, level) as Employee from dual
connect by level <= regexp_count (deleteNode, '[:]')  +1;
 )
  LOOP
      DELETE FROM TTESESSIONS_ATTENDEE
       WHERE (TRAINING_ID=:P10_EVENT_ID AND SESSION_ID=:P10_SESSION_ID AND ATTENDEE_ID=del.Employee )
   END LOOP;

END;




BEGIN
 
 BEGIN
  FOR events IN (
    SELECT "EVENT_NAME", "DISCRIPTION" ,"EVENT_TYPE","EVENT_RESOURCE_LINK","TOWARDS_PLA_FAMILY","TOWARDS_PLA_AREA" ,"OWNED_BY", "SESSION_MODE", "REGION", "COUNTRY","LOCATION","SESSION_STATUS",
    "SCHEDULED_TIME","SCHEDULED_ENDTIME"
	FROM EVENTSCHEDULE  WHERE EVENT_ID=:P10_EVENT_ID AND SESSION_ID=:P10_SESSION_ID
  )
  LOOP

    htp.p (
'<div style="padding-left: 3cm; background-color:#f0f0f0;  z-index: 1; ">
<br><br>
	<div>
		<div class="t-Form--slimPadding">
			<h4 style="font-family:Helvetica Neue; " > '  || events.EVENT_NAME||  '</h4>
			<p   style="font-size: 80%;" ><i>'|| INITCAP(to_char(events.SCHEDULED_TIME,'MONTH DD, YYYY')) ||
            ' ' || to_char(events.SCHEDULED_TIME,'HH24:MI') || '-' || to_char(events.SCHEDULED_ENDTIME,'HH24:MI')  || '    to    ' || 
            INITCAP(to_char(events.SCHEDULED_ENDTIME,'MONTH DD, YYYY')) ||' ' || to_char(events.SCHEDULED_TIME,'HH24:MI') || '-' 
                               || to_char(events.SCHEDULED_ENDTIME,'HH24:MI') || '</i><p>
           <div style="width:40%">
              <div style="float: left;"> <i style="font-size: 90%;"> Status : </i> <b>'|| events.SESSION_STATUS||'</b> </div> 
              <div style="float: right;"> <i style="font-size: 90%;"> Mode : </i> <b>'|| events.SESSION_MODE||'</b>  </div>
           </div>
            <br>
            <div>
           <p> <i style="font-size: 90%;"> type:</i> '|| events.EVENT_TYPE ||'</p>
		   <p> <i style="font-size: 90%;"> Description  :</i> <p  style="font-family:Helvetica Neue; width: 50%; text-indent: 20px;">'||  events.DISCRIPTION || '</p>   </p>   
           <p> <i style="font-size: 90%;"> Tutor  :</i> <span style="font-family:Helvetica Neue; ">'|| LOWER(events.OWNED_BY)  || '</span>   </p>
           <p> <i style="font-size: 90%;"> POC  :</i>    <span style="font-family:Helvetica Neue; "> '|| LOWER(events.OWNED_BY) || '</span> </p>
           <p> <i style="font-size: 90%;"> Resource Link  :</i><a href="'||  events.EVENT_RESOURCE_LINK || '" target="_blank"> '|| events.EVENT_RESOURCE_LINK ||'</a> </p> 
             </div>
            <br>
            <br>
		</div>
	</div>
</div>
<br>      <br>'

);

  END LOOP;

END;
 
END;




CREATE OR REPLACE FORCE EDITIONABLE VIEW  "EVENTSCHEDULE" ("EVENT_ID", "SESSION_ID" "EVENT_NAME", "DISCRIPTION", "PRESENTOR1", "PRESENTOR2", "PRESENTOR3", "PRESENTOR4", "PRESENTOR_5", "EVENT_TYPE", "EVENT_VISIBILITY", "EVENT_RESOURCE_LINK", "TOWARDS_PLA_FAMILY", "TOWARDS_PLA_AREA", "SESSION_STARTDATEL", "SESSION_ENDDATEL", "SESSION_STARTTIMEL", "SESSION_ENDTIMEL", "OWNED_BY", "SESSION_MODE", "REGION", "COUNTRY", "LOCATION", "SESSION_STATUS", "SCHEDULED_TIME", "SCHEDULED_ENDTIME", "DAYS", "HOURS_PER_DAY") AS 
  SELECT E.TRAINING_ID, S.SESSION_ID ,E.TRAINING_NAME ||' Session -' || S.SESSION_ID  AS NAME, E.DISCRIPTION ,E.PRESENTOR_ID1,E.PRESENTOR_ID2,E.PRESENTOR_ID3,E.PRESENTOR_ID4,E.PRESENTOR_ID5, E.TYPE, E.VISIBILITY ,E.TTRESOURCE ,E.TOWARDS_PLA_FAMILY, E.TOWARDS_PLA_AREA,
to_date(to_char(S.FROM_DATETIMEL,'DD-MON-YYYY'), 'DD-MON-YYYY') STARTDATEL ,to_date(to_char(S.FROM_DATETIMEL + S.NUMBER_OF_DAYS - INTERVAL '1' DAY , 'DD-MON-YYYY'),'DD-MON-YYYY') ENDDATEL , 
to_char ( S.FROM_DATETIMEL , 'HH24:MI:SS' ) STARTTIMEL , to_char (S.FROM_DATETIMEL + S.INTERVAL  , 'HH24:MI:SS' ) ENDTIMEL, E.OWNED_BY , S.SESSSION_MODE, S.REGION , S.COUNTRY , S.LOCATION,S.STATUS,S.FROM_DATETIMEL,S.FROM_DATETIMEL + S.INTERVAL +S.NUMBER_OF_DAYS - INTERVAL '1' DAY ,EXTRACT (DAY FROM  S.NUMBER_OF_DAYS) DAYS ,  EXTRACT (HOUR FROM  S.INTERVAL  )  HOURS
FROM TT_EVENT E   INNER JOIN TTEVENT_SESSIONS S   ON S.TRAINING_ID = E.TRAINING_ID;
/
